---
trigger: manual
---

# 敏捷开发5S个人规则

## 核心原则

遵循 "高效迭代、质量优先、进度透明" 的开发模式，确保项目高质量交付。

---

## 一、文档管理规范

### 1.1 进度文档更新

**每次会话结束时**：
- 更新 `/docs/项目进度/02_最新进度报告.md`
- 记录完成的工作内容、当前进度百分比
- 列出下一步计划

**重大变更时**：
- 同步更新 `/docs/开发计划/` 中的相关计划文档

### 1.2 代码文档同步

- 新增功能时，同步更新API文档或设计文档
- 架构变更时，更新技术架构文档
- 数据模型变更时，更新数据模型设计

---

## 二、开发执行流程

### 2.1 快速计划（针对小功能）

对于 **1-2天的功能扩展**：

1. **需求快速确认** (2分钟)
   - 查看现有相似功能实现
   - 确认技术方案与架构一致

2. **任务拆分** (3分钟)
   - 使用 `add_tasks` 工具创建2-5个原子任务
   - 列出依赖关系和验收标准

3. **循序执行** 
   - 按 `add_tasks` 顺序逐个完成
   - 每完成一个任务立即标记COMPLETE
   - 无法完成时主动中断询问

### 2.2 详细计划（针对新模块或重大功能）

对于 **需要架构新增** 或 **3天+的大功能**，执行完整6A流程：

**简化版流程**（现有项目已成熟）：
1. Align: 快速需求确认 (5分钟)
2. Architect: 架构与接口定义 (10分钟)
3. Atomize: 任务拆分 (5分钟)  
4. Approve: 快速审查 (2分钟)
5. Automate: 逐任务实现
6. Assess: 完成验收

---

## 三、问题解决规范

### 3.1 遇到问题时

1. **优先查找现有代码**
   - 在项目 `/backend` 或 `/frontend` 中查找类似实现
   - 复用现有模式和工具函数

2. **查阅项目文档**
   - 查看 `/docs/文档/` 目录下的设计和规范文档
   - 检查 `/docs/约束/` 中的约束规则

3. **遇到技术困难**
   - 立即中断并记录问题详情
   - 主动询问用户寻求支持
   - 不强行推进可能失败的方案

---

## 四、执行约束（硬性要求）

### 4.1 "三不允许" 原则

1. **不允许超出约束规则**
   - 所有代码必须遵循4W规范（低耦合、高内聚）
   - 所有开发必须遵循现有代码模式
   - 引入新工具/库需要先确认

2. **不允许代码错误**
   - 代码编译通过后才算完成
   - 测试必须通过
   - 集成到主分支前需要验证

3. **不允许沟通中断**
   - 遇到决策困难主动中断询问
   - 需求不清楚立即澄清
   - 技术方案有疑问先确认

---

## 五、代码输出标准

### 5.1 函数/方法注释

**所有函数必须包含**：
- 功能描述：一句话说明做什么
- 参数说明：参数类型、含义、默认值
- 返回值：返回类型和说明
- 异常处理：可能抛出的异常
- 使用示例（复杂函数）

**Go示例**：
```go
// CreateCompany 创建新公司
// 参数：
//   - ctx: 请求上下文
//   - req: 公司创建请求(name, description, userId必填)
// 返回：
//   - *Company: 创建的公司对象
//   - error: 创建过程中的错误
// 异常：
//   - ErrUserNotFound: 用户不存在
//   - ErrCompanyNameDuplicate: 公司名称已存在
func (s *CompanyService) CreateCompany(ctx context.Context, req *CreateCompanyRequest) (*Company, error) {
    // ... 实现
}
```

### 5.2 错误处理

- 所有错误必须被捕获和处理
- 记录详细的错误日志
- 向客户端返回有意义的错误信息

### 5.3 日志记录

- 关键业务操作记录info级别日志
- 错误情况记录error级别日志
- 调试信息使用debug级别（生产环境关闭）

---

## 六、进度跟踪

### 6.1 任务状态流转

```
PENDING (待执行) 
  ↓
IN_PROGRESS (执行中)
  ↓
COMPLETE (完成) / CANCELLED (取消) / ERROR (阻塞)
```

### 6.2 完成标志

任务标记为COMPLETE的条件：
- ✅ 代码编写完成
- ✅ 本地测试通过
- ✅ 与现有系统集成验证
- ✅ 相关文档已更新

---

## 七、快速查询

### 规范文档速查表

| 规范 | 文件 | 用途 |
|------|------|------|
| 代码污染与耦合 | `4W.md` | 代码设计规范、避免污染 |
| 敏捷开发规则 | `5S.md`（本文件） | 开发流程、进度管理 |
| 6A工作流 | `6A.md` | 详细决策流程、架构设计 |
| 代码审查 | `/docs/约束/4-代码审查与质量门禁规则.md` | 代码质量标准 |
| 技术架构 | `/docs/文档/02_技术架构文档.md` | 系统整体设计 |
| API规范 | `/docs/文档/04_API规格文档.md` | API设计标准 |

---

## 八、会话清单

**会话开始**:
- ✓ 阅读最新进度报告
- ✓ 确认当前任务

**会话进行中**:
- ✓ 定期更新任务状态
- ✓ 记录技术决策

**会话结束**:
- ✓ 更新进度文档
- ✓ 标记完成任务
- ✓ 列出待办项

---

**最后更新**: 2025-12-08
**项目状态**: M1阶段100%完成，核心服务已实现
**下一步**: 前端集成 / 工作流引擎 / 功能扩展
