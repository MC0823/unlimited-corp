# ğŸ§ª æµ‹è¯•ç­–ç•¥ä¸è‡ªåŠ¨åŒ–æµ‹è¯•è§„åˆ™

## 1. æ–‡æ¡£ç›®çš„
å»ºç«‹ç»Ÿä¸€çš„æµ‹è¯•ç­–ç•¥å’Œè‡ªåŠ¨åŒ–æµ‹è¯•æ ‡å‡†ï¼Œç¡®ä¿è½¯ä»¶è´¨é‡çš„å¯æ§æ€§å’Œå¯é‡å¤æ€§ã€‚

## 2. æµ‹è¯•é‡‘å­—å¡”æ¨¡å‹

### 2.1 æµ‹è¯•å±‚æ¬¡ç»“æ„
```
    /\    E2Eæµ‹è¯• (10%)
   /  \   
  /____\  é›†æˆæµ‹è¯• (20%)
 /      \ 
/________\ å•å…ƒæµ‹è¯• (70%)
```

### 2.2 å„å±‚æ¬¡æµ‹è¯•æ ‡å‡†

#### å•å…ƒæµ‹è¯•
**è¦†ç›–ç‡è¦æ±‚**ï¼š
- è¡Œè¦†ç›–ç‡ â‰¥ 80%
- åˆ†æ”¯è¦†ç›–ç‡ â‰¥ 70%
- æ–¹æ³•è¦†ç›–ç‡ â‰¥ 85%

**ç¼–å†™è§„èŒƒ**ï¼š
```java
// åç«¯ç¤ºä¾‹ - Java
public class UserServiceTest {
    
    @Test
    public void createUser_WithValidData_ShouldReturnUser() {
        // Given
        UserCreateDTO dto = new UserCreateDTO("test@example.com", "Test User");
        
        // When
        User user = userService.createUser(dto);
        
        // Then
        assertNotNull(user.getId());
        assertEquals("test@example.com", user.getEmail());
    }
    
    @Test
    public void createUser_WithDuplicateEmail_ShouldThrowException() {
        // Given
        UserCreateDTO dto = new UserCreateDTO("duplicate@example.com", "Test User");
        
        // When & Then
        assertThrows(DuplicateEmailException.class, () -> {
            userService.createUser(dto);
        });
    }
}
```

```typescript
// å‰ç«¯ç¤ºä¾‹ - TypeScript + Jest
describe('UserService', () => {
    it('should create user with valid data', async () => {
        // Given
        const userData = { email: 'test@example.com', name: 'Test User' };
        
        // When
        const result = await userService.createUser(userData);
        
        // Then
        expect(result.id).toBeDefined();
        expect(result.email).toBe('test@example.com');
    });
    
    it('should throw error for duplicate email', async () => {
        // Given
        const userData = { email: 'duplicate@example.com', name: 'Test User' };
        
        // When & Then
        await expect(userService.createUser(userData))
            .rejects.toThrow('Email already exists');
    });
});
```

#### é›†æˆæµ‹è¯•
**æµ‹è¯•èŒƒå›´**ï¼š
- APIæ¥å£æµ‹è¯•
- æ•°æ®åº“æ“ä½œæµ‹è¯•
- å¤–éƒ¨æœåŠ¡è°ƒç”¨æµ‹è¯•

**ç¼–å†™è§„èŒƒ**ï¼š
```java
// Spring Boot é›†æˆæµ‹è¯•ç¤ºä¾‹
@SpringBootTest
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
class UserIntegrationTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Test
    void createUser_ThroughAPI_ShouldPersistToDatabase() {
        // Given
        UserCreateDTO request = new UserCreateDTO("api@example.com", "API User");
        
        // When
        ResponseEntity<UserVO> response = restTemplate.postForEntity(
            "/api/users", request, UserVO.class);
        
        // Then
        assertEquals(HttpStatus.CREATED, response.getStatusCode());
        assertNotNull(response.getBody().getId());
        
        // éªŒè¯æ•°æ®åº“
        User user = userRepository.findByEmail("api@example.com");
        assertNotNull(user);
    }
}
```

#### E2Eæµ‹è¯•
**æµ‹è¯•åœºæ™¯**ï¼š
- å…³é”®ä¸šåŠ¡æµç¨‹
- ç”¨æˆ·æ ¸å¿ƒæ“ä½œè·¯å¾„
- è·¨ç³»ç»Ÿé›†æˆæµç¨‹

**å·¥å…·é€‰æ‹©**ï¼š
- Webåº”ç”¨ï¼šPlaywright / Cypress
- ç§»åŠ¨åº”ç”¨ï¼šAppium
- APIï¼šSupertest / REST Assured

## 3. æµ‹è¯•æ•°æ®ç®¡ç†

### 3.1 æµ‹è¯•æ•°æ®åŸåˆ™
- âœ… æµ‹è¯•æ•°æ®ä¸æµ‹è¯•ç”¨ä¾‹å…±å­˜
- âœ… ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºæµ‹è¯•æ•°æ®
- âœ… æµ‹è¯•é—´æ•°æ®éš”ç¦»
- âŒ ä¸ä½¿ç”¨ç”Ÿäº§æ•°æ®
- âŒ ä¸ä¾èµ–æµ‹è¯•æ‰§è¡Œé¡ºåº

### 3.2 æµ‹è¯•æ•°æ®å·¥å‚ç¤ºä¾‹
```java
public class UserTestDataFactory {
    
    public static UserCreateDTO.CreateUserDTOBuilder validUserBuilder() {
        return UserCreateDTO.builder()
            .email("test+" + System.currentTimeMillis() + "@example.com")
            .name("Test User")
            .password("Password123!");
    }
    
    public static UserEntity.UserEntityBuilder validUserEntityBuilder() {
        return UserEntity.builder()
            .email("entity+" + System.currentTimeMillis() + "@example.com")
            .name("Test Entity")
            .status(UserStatus.ACTIVE);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
UserCreateDTO user = validUserBuilder().build();
```

## 4. æµ‹è¯•æ‰§è¡Œç­–ç•¥

### 4.1 æœ¬åœ°å¼€å‘é˜¶æ®µ
```yaml
è§¦å‘æ¡ä»¶: ä»£ç ä¿å­˜æˆ–æ‰‹åŠ¨æ‰§è¡Œ
æ‰§è¡ŒèŒƒå›´: 
  - å½“å‰ä¿®æ”¹æ–‡ä»¶çš„å•å…ƒæµ‹è¯•
  - ç›¸å…³é›†æˆæµ‹è¯•
  - å¿«é€ŸE2Eæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
è¶…æ—¶é™åˆ¶: 3åˆ†é’Ÿå†…
```

### 4.2 CI/CDæµæ°´çº¿
```yaml
 stages:
   - å•å…ƒæµ‹è¯•:
      å¹¶è¡Œæ‰§è¡Œ: true
      è¶…æ—¶: 10åˆ†é’Ÿ
      
   - é›†æˆæµ‹è¯•:
      ä¾èµ–: å•å…ƒæµ‹è¯•é€šè¿‡
      è¶…æ—¶: 15åˆ†é’Ÿ
      
   - E2Eæµ‹è¯•:
      ä¾èµ–: é›†æˆæµ‹è¯•é€šè¿‡  
      è¶…æ—¶: 20åˆ†é’Ÿ
```

### 4.3 æµ‹è¯•ç¯å¢ƒç®¡ç†
```yaml
å•å…ƒæµ‹è¯•:
  ç¯å¢ƒ: å†…å­˜æ•°æ®åº“(H2/SQLite)
  ä¾èµ–: æ— å¤–éƒ¨ä¾èµ–
  
é›†æˆæµ‹è¯•:
  ç¯å¢ƒ: æµ‹è¯•æ•°æ®åº“(ç‹¬ç«‹Schema)
  ä¾èµ–: æ¨¡æ‹Ÿå¤–éƒ¨æœåŠ¡
  
E2Eæµ‹è¯•:
  ç¯å¢ƒ: ç±»ç”Ÿäº§ç¯å¢ƒ
  ä¾èµ–: çœŸå®å¤–éƒ¨æœåŠ¡(æµ‹è¯•ç¯å¢ƒ)
```

## 5. æµ‹è¯•è´¨é‡åº¦é‡

### 5.1 è´¨é‡æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡é¢‘ç‡ |
|------|--------|----------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | â‰¥80% | æ¯æ¬¡æ„å»º |
| é›†æˆæµ‹è¯•é€šè¿‡ç‡ | 100% | æ¯æ¬¡æ„å»º |
| E2Eæµ‹è¯•é€šè¿‡ç‡ | â‰¥95% | æ¯æ¬¡æ„å»º |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´ | <30åˆ†é’Ÿ | æ¯æ¬¡æ„å»º |
| ç¼ºé™·é€ƒé€¸ç‡ | <5% | æ¯æœˆ |

### 5.2 æµ‹è¯•æŠ¥å‘Šè§„èŒƒ
```markdown
## æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š

### æ‰§è¡Œæ¦‚å†µ
- æ‰§è¡Œæ—¶é—´: 2024-01-15 14:30
- æŒç»­æ—¶é—´: 12åˆ†34ç§’
- æ€»ä½“é€šè¿‡ç‡: 98.5%

### è¯¦ç»†ç»“æœ
| æµ‹è¯•ç±»å‹ | æ€»æ•° | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | é€šè¿‡ç‡ |
|----------|------|------|------|------|--------|
| å•å…ƒæµ‹è¯• | 1250 | 1235 | 10 | 5 | 98.8% |
| é›†æˆæµ‹è¯• | 156 | 150 | 6 | 0 | 96.2% |
| E2Eæµ‹è¯• | 45 | 44 | 1 | 0 | 97.8% |

### é—®é¢˜æ‘˜è¦
1. **ä¸¥é‡é—®é¢˜**: ç”¨æˆ·æ³¨å†Œæµç¨‹å¤±è´¥
   - å½±å“: é«˜
   - å…³è”: E2E-USER-003
   
2. **ä¸€èˆ¬é—®é¢˜**: è®¢å•æŸ¥è¯¢è¶…æ—¶
   - å½±å“: ä¸­  
   - å…³è”: INT-ORDER-012
```